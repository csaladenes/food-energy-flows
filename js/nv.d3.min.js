var publicPosition = 0;
(function() {
    function t(e, t) {
        return (new Date(t, e + 1, 0)).getDate()
    }

    function n(e, t, n) {
        return function(r, i, s) {
            var o = e(r),
                u = [];
            if (o < r) t(o);
            if (s > 1) {
                while (o < i) {
                    var a = new Date(+o);
                    if (n(a) % s === 0) u.push(a);
                    t(o)
                }
            } else {
                while (o < i) {
                    u.push(new Date(+o));
                    t(o)
                }
            }
            return u
        }
    }
    var e = window.nv || {};
    e.version = "1.1.15b";
    e.dev = false;
    window.nv = e;
    e.tooltip = e.tooltip || {};
    e.utils = e.utils || {};
    e.models = e.models || {};
    e.charts = {};
    e.graphs = [];
    e.logs = {};
    e.dispatch = d3.dispatch("render_start", "render_end");
    if (e.dev) {
        e.dispatch.on("render_start", function(t) {
            e.logs.startTime = +(new Date)
        });
        e.dispatch.on("render_end", function(t) {
            e.logs.endTime = +(new Date);
            e.logs.totalTime = e.logs.endTime - e.logs.startTime;
            e.log("total", e.logs.totalTime)
        })
    }
    e.log = function() {
        if (e.dev && console.log && console.log.apply) console.log.apply(console, arguments);
        else if (e.dev && typeof console.log == "function" && Function.prototype.bind) {
            var t = Function.prototype.bind.call(console.log, console);
            t.apply(console, arguments)
        }
        return arguments[arguments.length - 1]
    };
    e.render = function(n) {
        n = n || 1;
        e.render.active = true;
        e.dispatch.render_start();
        setTimeout(function() {
            var t, r;
            for (var i = 0; i < n && (r = e.render.queue[i]); i++) {
                t = r.generate();
                if (typeof r.callback == typeof Function) r.callback(t);
                e.graphs.push(t)
            }
            e.render.queue.splice(0, i);
            if (e.render.queue.length) setTimeout(arguments.callee, 0);
            else {
                e.dispatch.render_end();
                e.render.active = false
            }
        }, 0)
    };
    e.render.active = false;
    e.render.queue = [];
    e.addGraph = function(t) {
        if (typeof arguments[0] === typeof Function) t = {
            generate: arguments[0],
            callback: arguments[1]
        };
        e.render.queue.push(t);
        if (!e.render.active) e.render()
    };
    e.identity = function(e) {
        return e
    };
    e.strip = function(e) {
        return e.replace(/(\s|&)/g, "")
    };
    d3.time.monthEnd = function(e) {
        return new Date(e.getFullYear(), e.getMonth(), 0)
    };
    d3.time.monthEnds = n(d3.time.monthEnd, function(e) {
        e.setUTCDate(e.getUTCDate() + 1);
        e.setDate(t(e.getMonth() + 1, e.getFullYear()))
    }, function(e) {
        return e.getMonth()
    });
    e.interactiveGuideline = function() {
        "use strict";

        function c(o) {
            o.each(function(o) {
                function g() {
                    var e = d3.mouse(this);
                    var n = e[0];
                    var r = e[1];
                    var o = true;
                    var a = false;
                    if (l) {
                        n = d3.event.offsetX;
                        r = d3.event.offsetY;
                        if (d3.event.target.tagName !== "svg") o = false;
                        if (d3.event.target.className.baseVal.match("nv-legend")) a = true
                    }
                    if (o) {
                        n -= i.left;
                        r -= i.top
                    }
                    if (n < 0 || r < 0 || n > p || r > d || d3.event.relatedTarget && d3.event.relatedTarget.ownerSVGElement === undefined || a) {
                        if (l) {
                            if (d3.event.relatedTarget && d3.event.relatedTarget.ownerSVGElement === undefined && d3.event.relatedTarget.className.match(t.nvPointerEventsClass)) {
                                return
                            }
                        }
                        u.elementMouseout({
                            mouseX: n,
                            mouseY: r
                        });
                        c.renderGuideLine(null);
                        return
                    }
                    var f = s.invert(n);
                    u.elementMousemove({
                        mouseX: n,
                        mouseY: r,
                        pointXValue: f
                    });
                    if (d3.event.type === "dblclick") {
                        u.elementDblclick({
                            mouseX: n,
                            mouseY: r,
                            pointXValue: f
                        })
                    }
                }
                var h = d3.select(this);
                var p = n || 960,
                    d = r || 400;
                var v = h.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([o]);
                var m = v.enter().append("g").attr("class", " nv-wrap nv-interactiveLineLayer");
                m.append("g").attr("class", "nv-interactiveGuideLine");
                if (!f) {
                    return
                }
                f.on("mousemove", g, true).on("mouseout", g, true).on("dblclick", g);
                c.renderGuideLine = function(t) {
                    if (!a) return;
                    var n = v.select(".nv-interactiveGuideLine").selectAll("line").data(t != null ? [e.utils.NaNtoZero(t)] : [], String);
                    n.enter().append("line").attr("class", "nv-guideline").attr("x1", function(e) {
                        return e
                    }).attr("x2", function(e) {
                        return e
                    }).attr("y1", d).attr("y2", 0);
                    n.exit().remove()
                }
            })
        }
        var t = e.models.tooltip();
        var n = null,
            r = null,
            i = {
                left: 0,
                top: 0
            },
            s = d3.scale.linear(),
            o = d3.scale.linear(),
            u = d3.dispatch("elementMousemove", "elementMouseout", "elementDblclick"),
            a = true,
            f = null;
        var l = navigator.userAgent.indexOf("MSIE") !== -1;
        c.dispatch = u;
        c.tooltip = t;
        c.margin = function(e) {
            if (!arguments.length) return i;
            i.top = typeof e.top != "undefined" ? e.top : i.top;
            i.left = typeof e.left != "undefined" ? e.left : i.left;
            return c
        };
        c.width = function(e) {
            if (!arguments.length) return n;
            n = e;
            return c
        };
        c.height = function(e) {
            if (!arguments.length) return r;
            r = e;
            return c
        };
        c.xScale = function(e) {
            if (!arguments.length) return s;
            s = e;
            return c
        };
        c.showGuideLine = function(e) {
            if (!arguments.length) return a;
            a = e;
            return c
        };
        c.svgContainer = function(e) {
            if (!arguments.length) return f;
            f = e;
            return c
        };
        return c
    };
    e.interactiveBisect = function(e, t, n) {
        "use strict";
        if (!e instanceof Array) return null;
        if (typeof n !== "function") n = function(e, t) {
            return e.x
        };
        var r = d3.bisector(n).left;
        var i = d3.max([0, r(e, t) - 1]);
        var s = n(e[i], i);
        if (typeof s === "undefined") s = i;
        if (s === t) return i;
        var o = d3.min([i + 1, e.length - 1]);
        var u = n(e[o], o);
        if (typeof u === "undefined") u = o;
        if (Math.abs(u - t) >= Math.abs(s - t)) return i;
        else return o
    };
    e.nearestValueIndex = function(e, t, n) {
        "use strict";
        var r = Infinity,
            i = null;
        e.forEach(function(e, s) {
            var o = Math.abs(t - e);
            if (o <= r && o < n) {
                r = o;
                i = s
            }
        });
        return i
    };
    (function() {
        "use strict";
        window.nv.tooltip = {};
        window.nv.models.tooltip = function() {
            function y() {
                if (a) {
                    var e = d3.select(a);
                    if (e.node().tagName !== "svg") {
                        e = e.select("svg")
                    }
                    var t = e.node() ? e.attr("viewBox") : null;
                    if (t) {
                        t = t.split(" ");
                        var n = parseInt(e.style("width")) / t[2];
                        l.left = l.left * n;
                        l.top = l.top * n
                    }
                }
            }

            function b(e) {
                var t;
                if (a) t = d3.select(a);
                else t = d3.select("body");
                var n = t.select(".nvtooltip");
                if (n.node() === null) {
                    n = t.append("div").attr("class", "nvtooltip " + (u ? u : "xy-tooltip")).attr("id", h);
					
					//------------------------THEME STYLING
					n.style("background-color",themetooltipbg[themeid])
					 .style("border-color",themetooltipborder[themeid]);
					//-------------------------
					
                }
                n.node().innerHTML = e;
                n.style("top", 0).style("left", 0).style("opacity", 0);
                n.selectAll("div, table, td, tr").classed(p, true);
                n.classed(p, true);
				
				//------------------------THEME STYLING
				n.select("td").style("border-bottom","1px solid "+themetooltipborder[themeid]).style("text-align","center");
				//-------------------------
				
                return n.node()
            }

            function w() {
                if (!c) return;
                if (!g(n)) return;
                y();
                var t = l.left;
                var u = o != null ? o : l.top;
                var h = b(m(n));
                f = h;
                if (a) {
                    var p = a.getElementsByTagName("svg")[0];
                    var d = p ? p.getBoundingClientRect() : a.getBoundingClientRect();
                    var v = {
                        left: 0,
                        top: 0
                    };
                    if (p) {
                        var E = p.getBoundingClientRect();
                        var S = a.getBoundingClientRect();
                        var x = E.top;
                        if (x < 0) {
                            var T = a.getBoundingClientRect();
                            x = Math.abs(x) > T.height ? 0 : x
                        }
                        v.top = Math.abs(x - S.top);
                        v.left = Math.abs(E.left - S.left)
                    }
                    t += a.offsetLeft + v.left - 2 * a.scrollLeft;
                    u += a.offsetTop + v.top - 2 * a.scrollTop
                }
                if (s && s > 0) {
                    u = Math.floor(u / s) * s
                }
                e.tooltip.calcTooltipPosition([t, u], r, i, h);
                return w
            }
            var t = null,
                n = null,
                r = "n",
                i = 130,
                s = 200,
                o = null,
                u = null,
                a = null,
                f = null,
                l = {
                    left: null,
                    top: null
                },
                c = true,
                h = "nvtooltip-" + Math.floor(Math.random() * 1e5);
            var p = "nv-pointer-events-none";
            var d = function(e, t) {
                return e
            };
            var v = function(e) {
                return e
            };
            var m = function(e) {
                if (t != null) return t;
                if (e == null) return "";
                var n = d3.select(document.createElement("table"));
                var r = n.selectAll("thead").data([e]).enter().append("thead");
                r.append("tr").append("td").attr("colspan", 3).append("strong").classed("x-value", true).html(v(e.value));
                var i = n.selectAll("tbody").data([e]).enter().append("tbody");
                var s = i.selectAll("tr").data(function(e) {
                    return e.series
                }).enter().append("tr").classed("highlight", function(e) {
                    return e.highlight
                });
                s.append("td").classed("legend-color-guide", true).append("div").style("background-color", function(e) {
                    return e.color
                });
                s.append("td").classed("key", true).html(function(e) {
                    return e.key
                });
                s.append("td").classed("value", true).html(function(e, t) {
                    return d(e.value, t)
                });
                s.selectAll("td").each(function(e) {
                    if (e.highlight) {
                        var t = d3.scale.linear().domain([0, 1]).range(["#fff", e.color]);
                        var n = .6;
                        d3.select(this).style("border-bottom-color", t(n)).style("border-top-color", t(n))
                    }
                });
                var o = n.node().outerHTML;
                if (e.footer !== undefined) o += "<div class='footer'>" + e.footer + "</div>";
                return o
            };
            var g = function(e) {
                if (e && e.series && e.series.length > 0) return true;
                return false
            };
            w.nvPointerEventsClass = p;
            w.content = function(e) {
                if (!arguments.length) return t;
                t = e;
                return w
            };
            w.tooltipElem = function() {
                return f
            };
            w.contentGenerator = function(e) {
                if (!arguments.length) return m;
                if (typeof e === "function") {
                    m = e
                }
                return w
            };
            w.data = function(e) {
                if (!arguments.length) return n;
                n = e;
                return w
            };
            w.gravity = function(e) {
                if (!arguments.length) return r;
                r = e;
                return w
            };
            w.distance = function(e) {
                if (!arguments.length) return i;
                i = e;
                return w
            };
            w.snapDistance = function(e) {
                if (!arguments.length) return s;
                s = e;
                return w
            };
            w.classes = function(e) {
                if (!arguments.length) return u;
                u = e;
                return w
            };
            w.chartContainer = function(e) {
                if (!arguments.length) return a;
                a = e;
                return w
            };
            w.position = function(e) {
                if (!arguments.length) return l;
                l.left = typeof e.left !== "undefined" ? e.left : l.left;
                l.top = typeof e.top !== "undefined" ? e.top : l.top;
                return w
            };
            w.fixedTop = function(e) {
                if (!arguments.length) return o;
                o = e;
                return w
            };
            w.enabled = function(e) {
                if (!arguments.length) return c;
                c = e;
                return w
            };
            w.valueFormatter = function(e) {
                if (!arguments.length) return d;
                if (typeof e === "function") {
                    d = e
                }
                return w
            };
            w.headerFormatter = function(e) {
                if (!arguments.length) return v;
                if (typeof e === "function") {
                    v = e
                }
                return w
            };
            w.id = function() {
                return h
            };
            return w
        };
        e.tooltip.show = function(t, n, r, i, s, o) {
            var u = document.createElement("div");
            u.className = "nvtooltip " + (o ? o : "xy-tooltip");
            var a = s;
            if (!s || s.tagName.match(/g|svg/i)) {
                a = document.getElementsByTagName("body")[0]
            }
            u.style.left = 0;
            u.style.top = 0;
            u.style.opacity = 0;
			
			//------------------------THEME STYLING
			u.style.backgroundColor = themetooltipbg[themeid];
			u.style.borderColor = themetooltipborder[themeid];
            //-------------------------

			u.innerHTML = n;
            a.appendChild(u);
            if (s) {
                t[0] = t[0] - s.scrollLeft;
                t[1] = t[1] - s.scrollTop
            }
            e.tooltip.calcTooltipPosition(t, r, i, u)
        };
        e.tooltip.findFirstNonSVGParent = function(e) {
            while (e.tagName.match(/^g|svg$/i) !== null) {
                e = e.parentNode
            }
            return e
        };
        e.tooltip.findTotalOffsetTop = function(e, t) {
            var n = t;
            do {
                if (!isNaN(e.offsetTop)) {
                    n += e.offsetTop
                }
            } while (e = e.offsetParent);
            return n
        };
        e.tooltip.findTotalOffsetLeft = function(e, t) {
            var n = t;
            do {
                if (!isNaN(e.offsetLeft)) {
                    n += e.offsetLeft
                }
            } while (e = e.offsetParent);
            return n
        };
        e.tooltip.calcTooltipPosition = function(t, n, r, i) {
            var s = parseInt(i.offsetHeight),
                o = parseInt(i.offsetWidth),
                u = e.utils.windowSize().width,
                a = e.utils.windowSize().height,
                f = window.pageYOffset,
                l = window.pageXOffset,
                c, h;
            a = window.innerWidth >= document.body.scrollWidth ? a : a - 16;
            u = window.innerHeight >= document.body.scrollHeight ? u : u - 16;
            n = n || "s";
            r = r || 20;
            var p = function(t) {
                return e.tooltip.findTotalOffsetTop(t, h)
            };
            var d = function(t) {
                return e.tooltip.findTotalOffsetLeft(t, c)
            };
            switch (n) {
                case "e":
                    c = t[0] - o - r;
                    h = t[1] - s / 2;
                    var v = d(i);
                    var m = p(i);
                    if (v < l) c = t[0] + r > l ? t[0] + r : l - v + c;
                    if (m < f) h = f - m + h;
                    if (m + s > f + a) h = f + a - m + h - s;
                    break;
                case "w":
                    c = t[0] + r;
                    h = t[1] - s / 2;
                    var v = d(i);
                    var m = p(i);
                    if (v + o > u) c = t[0] - o - r;
                    if (m < f) h = f + 5;
                    if (m + s > f + a) h = f + a - m + h - s;
                    break;
                case "n":
                    c = t[0] - o / 2 - 5;
                    h = t[1] + r;
                    var v = d(i);
                    var m = p(i);
                    if (v < l) c = l + 5;
                    if (v + o > u) c = c - o / 2 + 5;
                    if (m + s > f + a) h = f + a - m + h - s;
                    break;
                case "s":
                    c = t[0] - o / 2;
                    h = t[1] - s - r;
                    var v = d(i);
                    var m = p(i);
                    if (v < l) c = l + 5;
                    if (v + o > u) c = c - o / 2 + 5;
                    if (f > m) h = f;
                    break;
                case "none":
                    c = t[0];
                    h = t[1] - r;
                    var v = d(i);
                    var m = p(i);
                    break
            }
            i.style.left = c + "px";
            i.style.top = h + "px";
            i.style.opacity = .9;
            i.style.position = "absolute";
            return i
        };
        e.tooltip.cleanup = function() {
            var e = document.getElementsByClassName("nvtooltip");
            var t = [];
            while (e.length) {
                t.push(e[0]);
                e[0].style.transitionDelay = "0 !important";
                e[0].style.opacity = 0;
                e[0].className = "nvtooltip-pending-removal"
            }
            setTimeout(function() {
                while (t.length) {
                    var e = t.pop();
                    e.parentNode.removeChild(e)
                }
            }, 500)
        }
    })();
    e.utils.windowSize = function() {
        var e = {
            width: 640,
            height: 480
        };
        if (document.body && document.body.offsetWidth) {
            e.width = document.body.offsetWidth;
            e.height = document.body.offsetHeight
        }
        if (document.compatMode == "CSS1Compat" && document.documentElement && document.documentElement.offsetWidth) {
            e.width = document.documentElement.offsetWidth;
            e.height = document.documentElement.offsetHeight
        }
        if (window.innerWidth && window.innerHeight) {
            e.width = window.innerWidth;
            e.height = window.innerHeight
        }
        return e
    };
    e.utils.windowResize = function(e) {
        if (e === undefined) return;
        var t = window.onresize;
        window.onresize = function(n) {
            if (typeof t == "function") t(n);
            e(n)
        }
    };
    e.utils.getColor = function(t) {
        if (!arguments.length) return e.utils.defaultColor();
        if (Object.prototype.toString.call(t) === "[object Array]") return function(e, n) {
            return e.color || t[n % t.length]
        };
        else return t
    };
    e.utils.defaultColor = function() {
        var e = d3.scale.category20().range();
        return function(t, n) {
            return t.color || e[n % e.length]
        }
    };
    e.utils.customTheme = function(e, t, n) {
        t = t || function(e) {
            return e.key
        };
        n = n || d3.scale.category20().range();
        var r = n.length;
        return function(i, s) {
            var o = t(i);
            if (!r) r = n.length;
            if (typeof e[o] !== "undefined") return typeof e[o] === "function" ? e[o]() : e[o];
            else return n[--r]
        }
    };
    e.utils.calcApproxTextWidth = function(e) {
        if (typeof e.style === "function" && typeof e.text === "function") {
            var t = parseInt(e.style("font-size").replace("px", ""));
            var n = e.text().length;
            return n * t * .5
        }
        return 0
    };
    e.utils.NaNtoZero = function(e) {
        if (typeof e !== "number" || isNaN(e) || e === null || e === Infinity) return 0;
        return e
    };
    e.utils.optionsFunc = function(e) {
        if (e) {
            d3.map(e).forEach(function(e, t) {
                if (typeof this[e] === "function") {
                    this[e](t)
                }
            }.bind(this))
        }
        return this
    };
    e.models.axis = function() {
        "use strict";

        function m(e) {
            e.each(function(e) {
                var i = d3.select(this);
                var m = i.selectAll("g.nv-wrap.nv-axis").data([e]);
                var g = m.enter().append("g").attr("class", "nvd3 nv-wrap nv-axis");
                var y = g.append("g");
                var b = m.select("g");
                if (p !== null) t.ticks(p);
                else if (t.orient() == "top" || t.orient() == "bottom") t.ticks(Math.abs(s.range()[1] - s.range()[0]) / 100);
                b.transition().call(t);
                v = v || t.scale();
                var w = t.tickFormat();
                if (w == null) {
                    w = v.tickFormat()
                }
                var E = b.selectAll("text.nv-axislabel").data([o || null]);
                E.exit().remove();
                switch (t.orient()) {
                    case "top":
                        E.enter().append("text").attr("class", "nv-axislabel");
                        var S = s.range().length == 2 ? s.range()[1] : s.range()[s.range().length - 1] + (s.range()[1] - s.range()[0]);
                        E.attr("text-anchor", "middle").attr("y", 0).attr("x", S / 2);
                        if (u) {
                            var x = m.selectAll("g.nv-axisMaxMin").data(s.domain());
                            x.enter().append("g").attr("class", "nv-axisMaxMin").append("text");
                            x.exit().remove();
                            x.attr("transform", function(e, t) {
                                return "translate(" + s(e) + ",0)"
                            }).select("text").attr("dy", "-0.5em").attr("y", -t.tickPadding()).attr("text-anchor", "middle").text(function(e, t) {
                                var n = w(e);
                                return ("" + n).match("NaN") ? "" : n
                            });
                            x.transition().attr("transform", function(e, t) {
                                return "translate(" + s.range()[t] + ",0)"
                            })
                        }
                        break;
                    case "bottom":
                        var T = 36;
                        var N = 30;
                        var C = b.selectAll("g").select("text");
                        if (f % 360) {
                            C.each(function(e, t) {
                                var n = this.getBBox().width;
                                if (n > N) N = n
                            });
                            var k = Math.abs(Math.sin(f * Math.PI / 180));
                            var T = (k ? k * N : N) + 30;
                            C.attr("transform", function(e, t, n) {
                                return "rotate(" + f + " 0,0)"
                            }).style("text-anchor", f % 360 > 0 ? "start" : "end")
                        }
                        E.enter().append("text").attr("class", "nv-axislabel");
                        var S = s.range().length == 2 ? s.range()[1] : s.range()[s.range().length - 1] + (s.range()[1] - s.range()[0]);
                        E.attr("text-anchor", "middle").attr("y", T).attr("x", S / 2);
                        if (u) {
                            var x = m.selectAll("g.nv-axisMaxMin").data([s.domain()[0], s.domain()[s.domain().length - 1]]);
                            x.enter().append("g").attr("class", "nv-axisMaxMin").append("text");
                            x.exit().remove();
                            x.attr("transform", function(e, t) {
                                return "translate(" + (s(e) + (h ? s.rangeBand() / 2 : 0)) + ",0)"
                            }).select("text").attr("dy", ".71em").attr("y", t.tickPadding()).attr("transform", function(e, t, n) {
                                return "rotate(" + f + " 0,0)"
                            }).style("text-anchor", f ? f % 360 > 0 ? "start" : "end" : "middle").text(function(e, t) {
                                var n = w(e);
                                return ("" + n).match("NaN") ? "" : n
                            });
                            x.transition().attr("transform", function(e, t) {
                                return "translate(" + (s(e) + (h ? s.rangeBand() / 2 : 0)) + ",0)"
                            })
                        }
                        if (c) C.attr("transform", function(e, t) {
                            return "translate(0," + (t % 2 == 0 ? "0" : "12") + ")"
                        });
                        break;
                    case "right":
                        E.enter().append("text").attr("class", "nv-axislabel");
                        E.style("text-anchor", l ? "middle" : "begin").attr("transform", l ? "rotate(90)" : "").attr("y", l ? -Math.max(n.right, r) + 12 : -10).attr("x", l ? s.range()[0] / 2 : t.tickPadding());
                        if (u) {
                            var x = m.selectAll("g.nv-axisMaxMin").data(s.domain());
                            x.enter().append("g").attr("class", "nv-axisMaxMin").append("text").style("opacity", 0);
                            x.exit().remove();
                            x.attr("transform", function(e, t) {
                                return "translate(0," + s(e) + ")"
                            }).select("text").attr("dy", ".32em").attr("y", 0).attr("x", t.tickPadding()).style("text-anchor", "start").text(function(e, t) {
                                var n = w(e);
                                return ("" + n).match("NaN") ? "" : n
                            });
                            x.transition().attr("transform", function(e, t) {
                                return "translate(0," + s.range()[t] + ")"
                            }).select("text").style("opacity", 1)
                        }
                        break;
                    case "left":
                        E.enter().append("text").attr("class", "nv-axislabel");
                        E.style("text-anchor", l ? "middle" : "end").attr("transform", l ? "rotate(-90)" : "").attr("y", l ? -Math.max(n.left, r) + d : -10).attr("x", l ? -s.range()[0] / 2 : -t.tickPadding());
                        if (u) {
                            var x = m.selectAll("g.nv-axisMaxMin").data(s.domain());
                            x.enter().append("g").attr("class", "nv-axisMaxMin").append("text").style("opacity", 0);
                            x.exit().remove();
                            x.attr("transform", function(e, t) {
                                return "translate(0," + v(e) + ")"
                            }).select("text").attr("dy", ".32em").attr("y", 0).attr("x", -t.tickPadding()).attr("text-anchor", "end").text(function(e, t) {
                                var n = w(e);
                                return ("" + n).match("NaN") ? "" : n
                            });
                            x.transition().attr("transform", function(e, t) {
                                return "translate(0," + s.range()[t] + ")"
                            }).select("text").style("opacity", 1)
                        }
                        break
                }
                E.text(function(e) {
                    return e
                });
                if (u && (t.orient() === "left" || t.orient() === "right")) {
                    b.selectAll("g").each(function(e, t) {
                        d3.select(this).select("text").attr("opacity", 1);
                        if (s(e) < s.range()[1] + 10 || s(e) > s.range()[0] - 10) {
                            if (e > 1e-10 || e < -1e-10) d3.select(this).attr("opacity", 0);
                            d3.select(this).select("text").attr("opacity", 0)
                        }
                    });
                    if (s.domain()[0] == s.domain()[1] && s.domain()[0] == 0) m.selectAll("g.nv-axisMaxMin").style("opacity", function(e, t) {
                        return !t ? 1 : 0
                    })
                }
                if (u && (t.orient() === "top" || t.orient() === "bottom")) {
                    var L = [];
                    m.selectAll("g.nv-axisMaxMin").each(function(e, t) {
                        try {
                            if (t) L.push(s(e) - this.getBBox().width - 4);
                            else L.push(s(e) + this.getBBox().width + 4)
                        } catch (n) {
                            if (t) L.push(s(e) - 4);
                            else L.push(s(e) + 4)
                        }
                    });
                    b.selectAll("g").each(function(e, t) {
                        if (s(e) < L[0] || s(e) > L[1]) {
                            if (e > 1e-10 || e < -1e-10) d3.select(this).remove();
                            else d3.select(this).select("text").remove()
                        }
                    })
                }
                if (a) b.selectAll(".tick").filter(function(e) {
                    return !parseFloat(Math.round(e.__data__ * 1e5) / 1e6) && e.__data__ !== undefined
                }).classed("zero", true);
                v = s.copy()
            });
            return m
        }
        var t = d3.svg.axis();
        var n = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            r = 55,
            i = 60,
            s = d3.scale.linear(),
            o = null,
            u = true,
            a = true,
            f = 0,
            l = true,
            c = false,
            h = false,
            p = null,
            d = 12;
        t.scale(s).orient("bottom").tickFormat(function(e) {
            return e
        });
        var v;
        m.axis = t;
        d3.rebind(m, t, "orient", "tickValues", "tickSubdivide", "tickSize", "tickPadding", "tickFormat");
        d3.rebind(m, s, "domain", "range", "rangeBand", "rangeBands");
        m.options = e.utils.optionsFunc.bind(m);
        m.margin = function(e) {
            if (!arguments.length) return n;
            n.top = typeof e.top != "undefined" ? e.top : n.top;
            n.right = typeof e.right != "undefined" ? e.right : n.right;
            n.bottom = typeof e.bottom != "undefined" ? e.bottom : n.bottom;
            n.left = typeof e.left != "undefined" ? e.left : n.left;
            return m
        };
        m.width = function(e) {
            if (!arguments.length) return r;
            r = e;
            return m
        };
        m.ticks = function(e) {
            if (!arguments.length) return p;
            p = e;
            return m
        };
        m.height = function(e) {
            if (!arguments.length) return i;
            i = e;
            return m
        };
        m.axisLabel = function(e) {
            if (!arguments.length) return o;
            o = e;
            return m
        };
        m.showMaxMin = function(e) {
            if (!arguments.length) return u;
            u = e;
            return m
        };
        m.highlightZero = function(e) {
            if (!arguments.length) return a;
            a = e;
            return m
        };
        m.scale = function(e) {
            if (!arguments.length) return s;
            s = e;
            t.scale(s);
            h = typeof s.rangeBands === "function";
            d3.rebind(m, s, "domain", "range", "rangeBand", "rangeBands");
            return m
        };
        m.rotateYLabel = function(e) {
            if (!arguments.length) return l;
            l = e;
            return m
        };
        m.rotateLabels = function(e) {
            if (!arguments.length) return f;
            f = e;
            return m
        };
        m.staggerLabels = function(e) {
            if (!arguments.length) return c;
            c = e;
            return m
        };
        m.axisLabelDistance = function(e) {
            if (!arguments.length) return d;
            d = e;
            return m
        };
        return m
    };
    e.models.legend = function() {
        "use strict";

        function c(h) {
            h.each(function(c) {
                var h = n - t.left - t.right,
                    p = d3.select(this);
                var d = p.selectAll("g.nv-legend").data([c]);
                var v = d.enter().append("g").attr("class", "nvd3 nv-legend").append("g");
                var m = d.select("g");
                d.attr("transform", "translate(" + t.left + "," + t.top + ")");
                var g = m.selectAll(".nv-series").data(function(e) {
                    return e
                });
                var y = g.enter().append("g").attr("class", "nv-series").on("mouseover", function(e, t) {
                    l.legendMouseover(e, t)
                }).on("mouseout", function(e, t) {
                    l.legendMouseout(e, t)
                }).on("click", function(e, t) {
                    l.legendClick(e, t);
                    if (a) {
                        if (f) {
                            c.forEach(function(e) {
                                e.disabled = true
                            });
                            e.disabled = false
                        } else {
                            e.disabled = !e.disabled;
                            if (c.every(function(e) {
                                    return e.disabled
                                })) {
                                c.forEach(function(e) {
                                    e.disabled = false
                                })
                            }
                        }
                        l.stateChange({
                            disabled: c.map(function(e) {
                                return !!e.disabled
                            })
                        })
                    }
                }).on("dblclick", function(e, t) {
                    l.legendDblclick(e, t);
                    if (a) {
                        c.forEach(function(e) {
                            e.disabled = true
                        });
                        e.disabled = false;
                        l.stateChange({
                            disabled: c.map(function(e) {
                                return !!e.disabled
                            })
                        })
                    }
                });
                y.append("circle").style("stroke-width", 2).attr("class", "nv-legend-symbol").attr("r", 5);
                y.append("text").attr("text-anchor", "start").attr("class", "nv-legend-text").attr("dy", ".32em").attr("dx", "8");
                g.classed("disabled", function(e) {
                    return e.disabled
                });
                g.exit().remove();
                g.select("circle").style("fill", function(e, t) {
                    return e.color || s(e, t)
                }).style("stroke", function(e, t) {
                    return e.color || s(e, t)
                });
                g.select("text").text(i);
                if (o) {
                    var b = [];
                    g.each(function(t, n) {
                        var r = d3.select(this).select("text");
                        var i;
                        try {
                            i = r.getComputedTextLength();
                            if (i <= 0) throw Error()
                        } catch (s) {
                            i = e.utils.calcApproxTextWidth(r)
                        }
                        b.push(i + 28)
                    });
                    var w = 0;
                    var E = 0;
                    var S = [];
                    while (E < h && w < b.length) {
                        S[w] = b[w];
                        E += b[w++]
                    }
                    if (w === 0) w = 1;
                    while (E > h && w > 1) {
                        S = [];
                        w--;
                        for (var x = 0; x < b.length; x++) {
                            if (b[x] > (S[x % w] || 0)) S[x % w] = b[x]
                        }
                        E = S.reduce(function(e, t, n, r) {
                            return e + t
                        })
                    }
                    var T = [];
                    for (var N = 0, C = 0; N < w; N++) {
                        T[N] = C;
                        C += S[N]
                    }
                    g.attr("transform", function(e, t) {
                        return "translate(" + T[t % w] + "," + (5 + Math.floor(t / w) * 20) + ")"
                    });
                    if (u) {
                        m.attr("transform", "translate(" + (n - t.right - E) + "," + t.top + ")")
                    } else {
                        m.attr("transform", "translate(0" + "," + t.top + ")")
                    }
                    r = t.top + t.bottom + Math.ceil(b.length / w) * 20
                } else {
                    var k = 5,
                        L = 5,
                        A = 0,
                        O;
                    g.attr("transform", function(e, r) {
                        var i = d3.select(this).select("text").node().getComputedTextLength() + 28;
                        O = L;
                        if (n < t.left + t.right + O + i) {
                            L = O = 5;
                            k += 20
                        }
                        L += i;
                        if (L > A) A = L;
                        return "translate(" + O + "," + k + ")"
                    });
                    m.attr("transform", "translate(" + (n - t.right - A) + "," + t.top + ")");
                    r = t.top + t.bottom + k + 15
                }
            });
            return c
        }
        var t = {
                top: 5,
                right: 0,
                bottom: 5,
                left: 7
            },
            n = 400,
            r = 20,
            i = function(e) {
                return e.key
            },
            s = e.utils.defaultColor(),
            o = true,
            u = false,
            a = true,
            f = false,
            l = d3.dispatch("legendClick", "legendDblclick", "legendMouseover", "legendMouseout", "stateChange");
        c.dispatch = l;
        c.options = e.utils.optionsFunc.bind(c);
        c.margin = function(e) {
            if (!arguments.length) return t;
            t.top = typeof e.top != "undefined" ? e.top : t.top;
            t.right = typeof e.right != "undefined" ? e.right : t.right;
            t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom;
            t.left = typeof e.left != "undefined" ? e.left : t.left;
            return c
        };
        c.width = function(e) {
            if (!arguments.length) return n;
            n = e;
            return c
        };
        c.height = function(e) {
            if (!arguments.length) return r;
            r = e;
            return c
        };
        c.key = function(e) {
            if (!arguments.length) return i;
            i = e;
            return c
        };
        c.color = function(t) {
            if (!arguments.length) return s;
            s = e.utils.getColor(t);
            return c
        };
        c.align = function(e) {
            if (!arguments.length) return o;
            o = e;
            return c
        };
        c.rightAlign = function(e) {
            if (!arguments.length) return u;
            u = e;
            return c
        };
        c.updateState = function(e) {
            if (!arguments.length) return a;
            a = e;
            return c
        };
        c.radioButtonMode = function(e) {
            if (!arguments.length) return f;
            f = e;
            return c
        };
        return c
    };
    e.models.scatter = function() {
        "use strict";

        function I(q) {
            q.each(function(I) {
                function Q() {
                    if (!g) return false;
                    var e;
                    var i = d3.merge(I.map(function(e, t) {
                        return e.values.map(function(e, n) {
                            var r = f(e, n);
                            var i = l(e, n);
                            return [o(r) + Math.random() * 1e-7, u(i) + Math.random() * 1e-7, t, n, e]
                        }).filter(function(e, t) {
                            return b(e[4], t)
                        })
                    }));
                    if (D === true) {
                        if (x) {
                            var a = X.select("defs").selectAll(".nv-point-clips").data([s]).enter();
                            a.append("clipPath").attr("class", "nv-point-clips").attr("id", "nv-points-clip-" + s);
                            var c = X.select("#nv-points-clip-" + s).selectAll("circle").data(i);
                            c.enter().append("circle").attr("r", T);
                            c.exit().remove();
                            c.attr("cx", function(e) {
                                return e[0]
                            }).attr("cy", function(e) {
                                return e[1]
                            });
                            X.select(".nv-point-paths").attr("clip-path", "url(#nv-points-clip-" + s + ")")
                        }
                        if (i.length) {
                            i.push([o.range()[0] - 20, u.range()[0] - 20, null, null]);
                            i.push([o.range()[1] + 20, u.range()[1] + 20, null, null]);
                            i.push([o.range()[0] - 20, u.range()[0] + 20, null, null]);
                            i.push([o.range()[1] + 20, u.range()[1] - 20, null, null])
                        }
                        var h = d3.geom.polygon([
                            [-10, -10],
                            [-10, r + 10],
                            [n + 10, r + 10],
                            [n + 10, -10]
                        ]);
                        var p = d3.geom.voronoi(i).map(function(e, t) {
                            return {
                                data: h.clip(e),
                                series: i[t][2],
                                point: i[t][3]
                            }
                        });
                        var d = X.select(".nv-point-paths").selectAll("path").data(p);
                        d.enter().append("path").attr("class", function(e, t) {
                            return "nv-path-" + t
                        });
                        d.exit().remove();
                        d.attr("d", function(e) {
                            if (e.data.length === 0) return "M 0 0";
                            else return "M" + e.data.join("L") + "Z"
                        });
                        var v = function(e, n) {
                            if (F) return 0;
                            var r = I[e.series];
                            if (typeof r === "undefined") return;
                            var i = r.values[e.point];
                            n({
                                point: i,
                                series: r,
                                pos: [o(f(i, e.point)) + t.left, u(l(i, e.point)) + t.top],
                                seriesIndex: e.series,
                                pointIndex: e.point
                            })
                        };
                        d.on("click", function(e) {
                            v(e, _.elementClick)
                        }).on("mouseover", function(e) {
                            v(e, _.elementMouseover)
                        }).on("mouseout", function(e, t) {
                            v(e, _.elementMouseout)
                        })
                    } else {
                        X.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click", function(e, n) {
                            if (F || !I[e.series]) return 0;
                            var r = I[e.series],
                                i = r.values[n];
                            _.elementClick({
                                point: i,
                                series: r,
                                pos: [o(f(i, n)) + t.left, u(l(i, n)) + t.top],
                                seriesIndex: e.series,
                                pointIndex: n
                            })
                        }).on("mouseover", function(e, n) {
                            if (F || !I[e.series]) return 0;
                            var r = I[e.series],
                                i = r.values[n];
                            _.elementMouseover({
                                point: i,
                                series: r,
                                pos: [o(f(i, n)) + t.left, u(l(i, n)) + t.top],
                                seriesIndex: e.series,
                                pointIndex: n
                            })
                        }).on("mouseout", function(e, t) {
                            if (F || !I[e.series]) return 0;
                            var n = I[e.series],
                                r = n.values[t];
                            _.elementMouseout({
                                point: r,
                                series: n,
                                seriesIndex: e.series,
                                pointIndex: t
                            })
                        })
                    }
                    F = false
                }
                var q = n - t.left - t.right,
                    R = r - t.top - t.bottom,
                    U = d3.select(this);
                I.forEach(function(e, t) {
                    e.values.forEach(function(e) {
                        e.series = t
                    })
                });
                var W = N && C && A ? [] : d3.merge(I.map(function(e) {
                    return e.values.map(function(e, t) {
                        return {
                            x: f(e, t),
                            y: l(e, t),
                            size: c(e, t)
                        }
                    })
                }));
                o.domain(N || d3.extent(W.map(function(e) {
                    return e.x
                }).concat(d)));
                if (w && I[0]) o.range(k || [(q * E + q) / (2 * I[0].values.length), q - q * (1 + E) / (2 * I[0].values.length)]);
                else o.range(k || [0, q]);
                u.domain(C || d3.extent(W.map(function(e) {
                    return e.y
                }).concat(v))).range(L || [R, 0]);
                a.domain(A || d3.extent(W.map(function(e) {
                    return e.size
                }).concat(m))).range(O || [16, 256]);
                if (o.domain()[0] === o.domain()[1] || u.domain()[0] === u.domain()[1]) M = true;
                if (o.domain()[0] === o.domain()[1]) o.domain()[0] ? o.domain([o.domain()[0] - o.domain()[0] * .01, o.domain()[1] + o.domain()[1] * .01]) : o.domain([-1, 1]);
                if (u.domain()[0] === u.domain()[1]) u.domain()[0] ? u.domain([u.domain()[0] - u.domain()[0] * .01, u.domain()[1] + u.domain()[1] * .01]) : u.domain([-1, 1]);
                if (isNaN(o.domain()[0])) {
                    o.domain([-1, 1])
                }
                if (isNaN(u.domain()[0])) {
                    u.domain([-1, 1])
                }
                P = P || o;
                H = H || u;
                B = B || a;
                var X = U.selectAll("g.nv-wrap.nv-scatter").data([I]);
                var V = X.enter().append("g").attr("class", "nvd3 nv-wrap nv-scatter nv-chart-" + s + (M ? " nv-single-point" : ""));
                var $ = V.append("defs");
                var J = V.append("g");
                var K = X.select("g");
                J.append("g").attr("class", "nv-groups");
                J.append("g").attr("class", "nv-point-paths");
                X.attr("transform", "translate(" + t.left + "," + t.top + ")");
                $.append("clipPath").attr("id", "nv-edge-clip-" + s).append("rect");
                X.select("#nv-edge-clip-" + s + " rect").attr("width", q).attr("height", R > 0 ? R : 0);
                K.attr("clip-path", S ? "url(#nv-edge-clip-" + s + ")" : "");
                F = true;
                var G = X.select(".nv-groups").selectAll(".nv-group").data(function(e) {
                    return e
                }, function(e) {
                    return e.key
                });
                G.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6);
                G.exit().remove();
                G.attr("class", function(e, t) {
                    return "nv-group nv-series-" + t
                }).classed("hover", function(e) {
                    return e.hover
                });
                G.transition().style("fill", function(e, t) {
                    return i(e, t)
                }).style("stroke", function(e, t) {
                    return i(e, t)
                }).style("stroke-opacity", 1).style("fill-opacity", .5);
                if (p) {
                    var Y = G.selectAll("circle.nv-point").data(function(e) {
                        return e.values
                    }, y);
                    Y.enter().append("circle").style("fill", function(e, t) {
                        return e.color
                    }).style("stroke", function(e, t) {
                        return e.color
                    }).attr("cx", function(t, n) {
                        return e.utils.NaNtoZero(P(f(t, n)))
                    }).attr("cy", function(t, n) {
                        return e.utils.NaNtoZero(H(l(t, n)))
                    }).attr("r", function(e, t) {
                        return Math.sqrt(a(c(e, t)) / Math.PI)
                    });
                    Y.exit().remove();
                    G.exit().selectAll("path.nv-point").transition().attr("cx", function(t, n) {
                        return e.utils.NaNtoZero(o(f(t, n)))
                    }).attr("cy", function(t, n) {
                        return e.utils.NaNtoZero(u(l(t, n)))
                    }).remove();
                    Y.each(function(e, t) {
                        d3.select(this).classed("nv-point", true).classed("nv-point-" + t, true).classed("hover", false)
                    });
                    Y.transition().attr("cx", function(t, n) {
                        return e.utils.NaNtoZero(o(f(t, n)))
                    }).attr("cy", function(t, n) {
                        return e.utils.NaNtoZero(u(l(t, n)))
                    }).attr("r", function(e, t) {
                        return Math.sqrt(a(c(e, t)) / Math.PI)
                    })
                } else {
                    var Y = G.selectAll("path.nv-point").data(function(e) {
                        return e.values
                    });
                    Y.enter().append("path").style("fill", function(e, t) {
                        return e.color
                    }).style("stroke", function(e, t) {
                        return e.color
                    }).attr("transform", function(e, t) {
                        return "translate(" + P(f(e, t)) + "," + H(l(e, t)) + ")"
                    }).attr("d", d3.svg.symbol().type(h).size(function(e, t) {
                        return a(c(e, t))
                    }));
                    Y.exit().remove();
                    G.exit().selectAll("path.nv-point").transition().attr("transform", function(e, t) {
                        return "translate(" + o(f(e, t)) + "," + u(l(e, t)) + ")"
                    }).remove();
                    Y.each(function(e, t) {
                        d3.select(this).classed("nv-point", true).classed("nv-point-" + t, true).classed("hover", false)
                    });
                    Y.transition().attr("transform", function(e, t) {
                        return "translate(" + o(f(e, t)) + "," + u(l(e, t)) + ")"
                    }).attr("d", d3.svg.symbol().type(h).size(function(e, t) {
                        return a(c(e, t))
                    }))
                }
                clearTimeout(j);
                j = setTimeout(Q, 300);
                P = o.copy();
                H = u.copy();
                B = a.copy()
            });
            return I
        }
        var t = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            n = 960,
            r = 500,
            i = e.utils.defaultColor(),
            s = Math.floor(Math.random() * 1e5),
            o = d3.scale.linear(),
            u = d3.scale.linear(),
            a = d3.scale.linear(),
            f = function(e) {
                return e.x
            },
            l = function(e) {
                return e.y
            },
            c = function(e) {
                return e.size || 1
            },
            h = function(e) {
                return e.shape || "circle"
            },
            p = true,
            d = [],
            v = [],
            m = [],
            g = true,
            y = null,
            b = function(e) {
                return !e.notActive
            },
            w = false,
            E = .1,
            S = false,
            x = true,
            T = function() {
                return 25
            },
            N = null,
            C = null,
            k = null,
            L = null,
            A = null,
            O = null,
            M = false,
            _ = d3.dispatch("elementClick", "elementMouseover", "elementMouseout"),
            D = true;
        var P, H, B, j, F = false;
        I.clearHighlights = function() {
            d3.selectAll(".nv-chart-" + s + " .nv-point.hover").classed("hover", false)
        };
        I.highlightPoint = function(e, t, n) {
            d3.select(".nv-chart-" + s + " .nv-series-" + e + " .nv-point-" + t).classed("hover", n)
        };
        _.on("elementMouseover.point", function(e) {
            if (g) I.highlightPoint(e.seriesIndex, e.pointIndex, true)
        });
        _.on("elementMouseout.point", function(e) {
            if (g) I.highlightPoint(e.seriesIndex, e.pointIndex, false)
        });
        I.dispatch = _;
        I.options = e.utils.optionsFunc.bind(I);
        I.x = function(e) {
            if (!arguments.length) return f;
            f = d3.functor(e);
            return I
        };
        I.y = function(e) {
            if (!arguments.length) return l;
            l = d3.functor(e);
            return I
        };
        I.size = function(e) {
            if (!arguments.length) return c;
            c = d3.functor(e);
            return I
        };
        I.margin = function(e) {
            if (!arguments.length) return t;
            t.top = typeof e.top != "undefined" ? e.top : t.top;
            t.right = typeof e.right != "undefined" ? e.right : t.right;
            t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom;
            t.left = typeof e.left != "undefined" ? e.left : t.left;
            return I
        };
        I.width = function(e) {
            if (!arguments.length) return n;
            n = e;
            return I
        };
        I.height = function(e) {
            if (!arguments.length) return r;
            r = e;
            return I
        };
        I.xScale = function(e) {
            if (!arguments.length) return o;
            o = e;
            return I
        };
        I.yScale = function(e) {
            if (!arguments.length) return u;
            u = e;
            return I
        };
        I.zScale = function(e) {
            if (!arguments.length) return a;
            a = e;
            return I
        };
        I.xDomain = function(e) {
            if (!arguments.length) return N;
            N = e;
            return I
        };
        I.yDomain = function(e) {
            if (!arguments.length) return C;
            C = e;
            return I
        };
        I.sizeDomain = function(e) {
            if (!arguments.length) return A;
            A = e;
            return I
        };
        I.xRange = function(e) {
            if (!arguments.length) return k;
            k = e;
            return I
        };
        I.yRange = function(e) {
            if (!arguments.length) return L;
            L = e;
            return I
        };
        I.sizeRange = function(e) {
            if (!arguments.length) return O;
            O = e;
            return I
        };
        I.forceX = function(e) {
            if (!arguments.length) return d;
            d = e;
            return I
        };
        I.forceY = function(e) {
            if (!arguments.length) return v;
            v = e;
            return I
        };
        I.forceSize = function(e) {
            if (!arguments.length) return m;
            m = e;
            return I
        };
        I.interactive = function(e) {
            if (!arguments.length) return g;
            g = e;
            return I
        };
        I.pointKey = function(e) {
            if (!arguments.length) return y;
            y = e;
            return I
        };
        I.pointActive = function(e) {
            if (!arguments.length) return b;
            b = e;
            return I
        };
        I.padData = function(e) {
            if (!arguments.length) return w;
            w = e;
            return I
        };
        I.padDataOuter = function(e) {
            if (!arguments.length) return E;
            E = e;
            return I
        };
        I.clipEdge = function(e) {
            if (!arguments.length) return S;
            S = e;
            return I
        };
        I.clipVoronoi = function(e) {
            if (!arguments.length) return x;
            x = e;
            return I
        };
        I.useVoronoi = function(e) {
            if (!arguments.length) return D;
            D = e;
            if (D === false) {
                x = false
            }
            return I
        };
        I.clipRadius = function(e) {
            if (!arguments.length) return T;
            T = e;
            return I
        };
        I.color = function(t) {
            if (!arguments.length) return i;
            i = e.utils.getColor(t);
            return I
        };
        I.shape = function(e) {
            if (!arguments.length) return h;
            h = e;
            return I
        };
        I.onlyCircles = function(e) {
            if (!arguments.length) return p;
            p = e;
            return I
        };
        I.id = function(e) {
            if (!arguments.length) return s;
            s = e;
            return I
        };
        I.singlePoint = function(e) {
            if (!arguments.length) return M;
            M = e;
            return I
        };
        return I
    };
    e.models.line = function() {
        "use strict";

        function m(g) {
            g.each(function(m) {
                var g = r - n.left - n.right,
                    b = i - n.top - n.bottom,
                    w = d3.select(this);
                c = t.xScale();
                h = t.yScale();
                d = d || c;
                v = v || h;
                var E = w.selectAll("g.nv-wrap.nv-line").data([m]);
                var S = E.enter().append("g").attr("class", "nvd3 nv-wrap nv-line");
                var T = S.append("defs");
                var N = S.append("g");
                var C = E.select("g");
                N.append("g").attr("class", "nv-groups");
                N.append("g").attr("class", "nv-scatterWrap");
                E.attr("transform", "translate(" + n.left + "," + n.top + ")");
                t.width(g).height(b);
                var k = E.select(".nv-scatterWrap");
                k.transition().call(t);
                T.append("clipPath").attr("id", "nv-edge-clip-" + t.id()).append("rect");
                E.select("#nv-edge-clip-" + t.id() + " rect").attr("width", g).attr("height", b > 0 ? b : 0);
                C.attr("clip-path", l ? "url(#nv-edge-clip-" + t.id() + ")" : "");
                k.attr("clip-path", l ? "url(#nv-edge-clip-" + t.id() + ")" : "");
                var L = E.select(".nv-groups").selectAll(".nv-group").data(function(e) {
                    return e
                }, function(e) {
                    return e.key
                });
                L.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6);
                L.exit().remove();
                L.attr("class", function(e, t) {
                    return "nv-group nv-series-" + t
                }).classed("hover", function(e) {
                    return e.hover
                }).style("fill", function(e, t) {
                    return s(e, t)
                }).style("stroke", function(e, t) {
                    return s(e, t)
                });
                L.transition().style("stroke-opacity", 1).style("fill-opacity", .5);
                var A = L.selectAll("path.nv-area").data(function(e) {
                    return f(e) ? [e] : []
                });
                A.enter().append("path").attr("class", "nv-area").attr("d", function(t) {
                    return d3.svg.area().interpolate(p).defined(a).x(function(t, n) {
                        return e.utils.NaNtoZero(d(o(t, n)))
                    }).y0(function(t, n) {
                        return e.utils.NaNtoZero(v(u(t, n)))
                    }).y1(function(e, t) {
                        return v(h.domain()[0] <= 0 ? h.domain()[1] >= 0 ? 0 : h.domain()[1] : h.domain()[0])
                    }).apply(this, [t.values])
                });
                L.exit().selectAll("path.nv-area").remove();
                A.transition().attr("d", function(t) {
                    return d3.svg.area().interpolate(p).defined(a).x(function(t, n) {
                        return e.utils.NaNtoZero(c(o(t, n)))
                    }).y0(function(t, n) {
                        return e.utils.NaNtoZero(h(u(t, n)))
                    }).y1(function(e, t) {
                        return h(h.domain()[0] <= 0 ? h.domain()[1] >= 0 ? 0 : h.domain()[1] : h.domain()[0])
                    }).apply(this, [t.values])
                });
                var O = L.selectAll("path.nv-line").data(function(e) {
                    return [e.values]
                });
                O.enter().append("path").attr("class", "nv-line").attr("d", d3.svg.line().interpolate(p).defined(a).x(function(t, n) {
                    return e.utils.NaNtoZero(d(o(t, n)))
                }).y(function(t, n) {
                    return e.utils.NaNtoZero(v(u(t, n)))
                }));
                O.transition().attr("d", d3.svg.line().interpolate(p).defined(a).x(function(t, n) {
                    return e.utils.NaNtoZero(c(o(t, n)))
                }).y(function(t, n) {
                    return e.utils.NaNtoZero(h(u(t, n)))
                }));
                d = c.copy();
                v = h.copy()
            });
            return m
        }
        var t = e.models.scatter();
        var n = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            r = 960,
            i = 500,
            s = e.utils.defaultColor(),
            o = function(e) {
                return e.x
            },
            u = function(e) {
                return e.y
            },
            a = function(e, t) {
                return !isNaN(u(e, t)) && u(e, t) !== null
            },
            f = function(e) {
                return e.area
            },
            l = false,
            c, h, p = "linear";
        t.size(16).sizeDomain([16, 256]);
        var d, v;
        m.dispatch = t.dispatch;
        m.scatter = t;
        d3.rebind(m, t, "id", "interactive", "size", "xScale", "yScale", "zScale", "xDomain", "yDomain", "xRange", "yRange", "sizeDomain", "forceX", "forceY", "forceSize", "clipVoronoi", "useVoronoi", "clipRadius", "padData", "highlightPoint", "clearHighlights");
        m.options = e.utils.optionsFunc.bind(m);
        m.margin = function(e) {
            if (!arguments.length) return n;
            n.top = typeof e.top != "undefined" ? e.top : n.top;
            n.right = typeof e.right != "undefined" ? e.right : n.right;
            n.bottom = typeof e.bottom != "undefined" ? e.bottom : n.bottom;
            n.left = typeof e.left != "undefined" ? e.left : n.left;
            return m
        };
        m.width = function(e) {
            if (!arguments.length) return r;
            r = e;
            return m
        };
        m.height = function(e) {
            if (!arguments.length) return i;
            i = e;
            return m
        };
        m.x = function(e) {
            if (!arguments.length) return o;
            o = e;
            t.x(e);
            return m
        };
        m.y = function(e) {
            if (!arguments.length) return u;
            u = e;
            t.y(e);
            return m
        };
        m.clipEdge = function(e) {
            if (!arguments.length) return l;
            l = e;
            return m
        };
        m.color = function(n) {
            if (!arguments.length) return s;
            s = e.utils.getColor(n);
            t.color(s);
            return m
        };
        m.interpolate = function(e) {
            if (!arguments.length) return p;
            p = e;
            return m
        };
        m.defined = function(e) {
            if (!arguments.length) return a;
            a = e;
            return m
        };
        m.isArea = function(e) {
            if (!arguments.length) return f;
            f = d3.functor(e);
            return m
        };
        return m
    };
    e.models.lineChart = function() {
        "use strict";

        function N(m) {
            m.each(function(m) {
                var C = d3.select(this),
                    k = this;
                var L = (a || parseInt(C.style("width")) || 960) - o.left - o.right,
                    A = (f || parseInt(C.style("height")) || 400) - o.top - o.bottom;
                N.update = function() {
                    C.transition().duration(x).call(N)
                };
                N.container = this;
                b.disabled = m.map(function(e) {
                    return !!e.disabled
                });
                if (!w) {
                    var O;
                    w = {};
                    for (O in b) {
                        if (b[O] instanceof Array) w[O] = b[O].slice(0);
                        else w[O] = b[O]
                    }
                }
                if (!m || !m.length || !m.filter(function(e) {
                        return e.values.length
                    }).length) {
                    var M = C.selectAll(".nv-noData").data([E]);
                    M.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle");
                    M.attr("x", o.left + L / 2).attr("y", o.top + A / 2).text(function(e) {
                        return e
                    });
                    return N
                } else {
                    C.selectAll(".nv-noData").remove()
                }
                g = t.xScale();
                y = t.yScale();
                var _ = C.selectAll("g.nv-wrap.nv-lineChart").data([m]);
                var D = _.enter().append("g").attr("class", "nvd3 nv-wrap nv-lineChart").append("g");
                var P = _.select("g");
                D.append("rect").style("opacity", 0);
                D.append("g").attr("class", "nv-x nv-axis");
                D.append("g").attr("class", "nv-y nv-axis");
                D.append("g").attr("class", "nv-linesWrap");
                D.append("g").attr("class", "nv-legendWrap");
                D.append("g").attr("class", "nv-interactive");
                P.select("rect").attr("width", L).attr("height", A > 0 ? A : 0);
                if (l) {
                    i.width(L);
                    P.select(".nv-legendWrap").datum(m).call(i);
                    if (o.top != i.height()) {
                        o.top = i.height();
                        A = (f || parseInt(C.style("height")) || 400) - o.top - o.bottom
                    }
                    _.select(".nv-legendWrap").attr("transform", "translate(0," + -o.top + ")")
                }
                _.attr("transform", "translate(" + o.left + "," + o.top + ")");
                if (p) {
                    P.select(".nv-y.nv-axis").attr("transform", "translate(" + L + ",0)")
                }
                if (d) {
                    s.width(L).height(A).margin({
                        left: o.left,
                        top: o.top
                    }).svgContainer(C).xScale(g);
                    _.select(".nv-interactive").call(s)
                }
                t.width(L).height(A).color(m.map(function(e, t) {
                    return e.color || u(e, t)
                }).filter(function(e, t) {
                    return !m[t].disabled
                }));
                var H = P.select(".nv-linesWrap").datum(m.filter(function(e) {
                    return !e.disabled
                }));
                H.transition().call(t);
                if (c) {
                    n.scale(g).ticks(L / 100).tickSize(-A, 0);
                    P.select(".nv-x.nv-axis").attr("transform", "translate(0," + y.range()[0] + ")");
                    P.select(".nv-x.nv-axis").transition().call(n)
                }
                if (h) {
                    r.scale(y).ticks(A / 36).tickSize(-L, 0);
                    P.select(".nv-y.nv-axis").transition().call(r)
                }
                i.dispatch.on("stateChange", function(e) {
                    b = e;
                    S.stateChange(b);
                    N.update()
                });
                s.dispatch.on("elementMousemove", function(i) {
                    t.clearHighlights();
                    var a, f, l, c = [];
                    m.filter(function(e, t) {
                        e.seriesIndex = t;
                        return !e.disabled
                    }).forEach(function(n, r) {
                        f = e.interactiveBisect(n.values, i.pointXValue, N.x());
                        if (r == 0) {
                            publicPosition = f
                        }
                        t.highlightPoint(r, f, true);
                        var s = n.values[f];
                        if (typeof s === "undefined") return;
                        if (typeof a === "undefined") a = s;
                        if (typeof l === "undefined") l = N.xScale()(N.x()(s, f));
                        c.push({
                            key: n.key,
                            value: N.y()(s, f),
                            color: u(n, n.seriesIndex)
                        })
                    });
                    var h = n.tickFormat()(N.x()(a, f));
                    s.tooltip.position({
                        left: l + o.left,
                        top: i.mouseY + o.top
                    }).chartContainer(k.parentNode).enabled(v).valueFormatter(function(e, t) {
                        return r.tickFormat()(e)
                    }).data({
                        value: h,
                        series: c
                    })();
                    s.renderGuideLine(l)
                });
                s.dispatch.on("elementMouseout", function(e) {
                    S.tooltipHide();
                    t.clearHighlights()
                });
                S.on("tooltipShow", function(e) {
                    if (v) T(e, k.parentNode)
                });
                S.on("changeState", function(e) {
                    if (typeof e.disabled !== "undefined" && m.length === e.disabled.length) {
                        m.forEach(function(t, n) {
                            t.disabled = e.disabled[n]
                        });
                        b.disabled = e.disabled
                    }
                    N.update()
                })
            });
            return N
        }
        var t = e.models.line(),
            n = e.models.axis(),
            r = e.models.axis(),
            i = e.models.legend(),
            s = e.interactiveGuideline();
        var o = {
                top: 7,
                right: 13,
                bottom: 7,
                left: 0
            },
            u = e.utils.defaultColor(),
            a = null,
            f = null,
            l = true,
            c = true,
            h = true,
            p = false,
            d = false,
            v = true,
            m = function(e, t, n, r, i) {
                return "<h3>" + e + "</h3>" + "<p>" + n + " at " + t + "</p>"
            },
            g, y, b = {},
            w = null,
            E = "No Data Available.",
            S = d3.dispatch("tooltipShow", "tooltipHide", "stateChange", "changeState"),
            x = 250;
        n.orient("bottom").tickPadding(7);
        r.orient(p ? "right" : "left");
        var T = function(i, s) {
            var o = i.pos[0] + (s.offsetLeft || 0),
                u = i.pos[1] + (s.offsetTop || 0),
                a = n.tickFormat()(t.x()(i.point, i.pointIndex)),
                f = r.tickFormat()(t.y()(i.point, i.pointIndex)),
                l = m(i.series.key, a, f, i, N);
            e.tooltip.show([o, u], l, null, null, s)
        };
        t.dispatch.on("elementMouseover.tooltip", function(e) {
            e.pos = [e.pos[0] + o.left, e.pos[1] + o.top];
            S.tooltipShow(e)
        });
        t.dispatch.on("elementMouseout.tooltip", function(e) {
            S.tooltipHide(e)
        });
        S.on("tooltipHide", function() {
            if (v) e.tooltip.cleanup()
        });
        N.dispatch = S;
        N.lines = t;
        N.legend = i;
        N.xAxis = n;
        N.yAxis = r;
        N.interactiveLayer = s;
        d3.rebind(N, t, "defined", "isArea", "x", "y", "size", "xScale", "yScale", "xDomain", "yDomain", "xRange", "yRange", "forceX", "forceY", "interactive", "clipEdge", "clipVoronoi", "useVoronoi", "id", "interpolate");
        N.options = e.utils.optionsFunc.bind(N);
        N.margin = function(e) {
            if (!arguments.length) return o;
            o.top = typeof e.top != "undefined" ? e.top : o.top;
            o.right = typeof e.right != "undefined" ? e.right : o.right;
            o.bottom = typeof e.bottom != "undefined" ? e.bottom : o.bottom;
            o.left = typeof e.left != "undefined" ? e.left : o.left;
            return N
        };
        N.width = function(e) {
            if (!arguments.length) return a;
            a = e;
            return N
        };
        N.height = function(e) {
            if (!arguments.length) return f;
            f = e;
            return N
        };
        N.color = function(t) {
            if (!arguments.length) return u;
            u = e.utils.getColor(t);
            i.color(u);
            return N
        };
        N.showLegend = function(e) {
            if (!arguments.length) return l;
            l = e;
            return N
        };
        N.showXAxis = function(e) {
            if (!arguments.length) return c;
            c = e;
            return N
        };
        N.showYAxis = function(e) {
            if (!arguments.length) return h;
            h = e;
            return N
        };
        N.rightAlignYAxis = function(e) {
            if (!arguments.length) return p;
            p = e;
            r.orient(e ? "right" : "left");
            return N
        };
        N.useInteractiveGuideline = function(e) {
            if (!arguments.length) return d;
            d = e;
            if (e === true) {
                N.interactive(false);
                N.useVoronoi(false)
            }
            return N
        };
        N.tooltips = function(e) {
            if (!arguments.length) return v;
            v = e;
            return N
        };
        N.tooltipContent = function(e) {
            if (!arguments.length) return m;
            m = e;
            return N
        };
        N.state = function(e) {
            if (!arguments.length) return b;
            b = e;
            return N
        };
        N.defaultState = function(e) {
            if (!arguments.length) return w;
            w = e;
            return N
        };
        N.noData = function(e) {
            if (!arguments.length) return E;
            E = e;
            return N
        };
        N.transitionDuration = function(e) {
            if (!arguments.length) return x;
            x = e;
            return N
        };
        return N
    };
    e.models.pie = function() {
        "use strict";

        function S(e) {
            e.each(function(e) {
                function q(e) {
                    var t = (e.startAngle + e.endAngle) * 90 / Math.PI - 90;
                    return t > 90 ? t - 180 : t
                }

                function R(e) {
                    e.endAngle = isNaN(e.endAngle) ? 0 : e.endAngle;
                    e.startAngle = isNaN(e.startAngle) ? 0 : e.startAngle;
                    if (!m) e.innerRadius = 0;
                    var t = d3.interpolate(this._current, e);
                    this._current = t(0);
                    return function(e) {
                        return A(t(e))
                    }
                }

                function U(e) {
                    e.innerRadius = 0;
                    var t = d3.interpolate({
                        startAngle: 0,
                        endAngle: 0
                    }, e);
                    return function(e) {
                        return A(t(e))
                    }
                }
                var o = n - t.left - t.right,
                    f = r - t.top - t.bottom,
                    S = Math.min(o, f) / 2,
                    x = .85 * S,
                    T = d3.select(this);
                var N = T.selectAll(".nv-wrap.nv-pie").data(e);
                var C = N.enter().append("g").attr("class", "nvd3 nv-wrap nv-pie nv-chart-" + u);
                var k = C.append("g");
                var L = N.select("g");
                k.append("g").attr("class", "nv-pie");
                k.append("g").attr("class", "nv-pieLabels");
                N.attr("transform", "translate(" + t.left + "," + t.top + ")");
                L.select(".nv-pie").attr("transform", "translate(" + o / 2 + "," + f / 2 + ")");
                L.select(".nv-pieLabels").attr("transform", "translate(" + o / 2 + "," + f / 2 + ")");
                T.on("click", function(e, t) {
                    E.chartClick({
                        data: e,
                        index: t,
                        pos: d3.event,
                        id: u
                    })
                });
                var A = d3.svg.arc().outerRadius(x);
                if (y) A.startAngle(y);
                if (b) A.endAngle(b);
                if (m) A.innerRadius(S * w);
                var O = d3.layout.pie().sort(null).value(function(e) {
                    return e.disabled ? 0 : s(e)
                });
                var M = N.select(".nv-pie").selectAll(".nv-slice").data(O);
                var _ = N.select(".nv-pieLabels").selectAll(".nv-label").data(O);
                M.exit().remove();
                _.exit().remove();
                var D = M.enter().append("g").attr("class", "nv-slice").on("mouseover", function(e, t) {
                    d3.select(this).classed("hover", true);
                    E.elementMouseover({
                        label: i(e.data),
                        value: s(e.data),
                        point: e.data,
                        pointIndex: t,
                        pos: [d3.event.pageX, d3.event.pageY],
                        id: u
                    })
                }).on("mouseout", function(e, t) {
                    d3.select(this).classed("hover", false);
                    E.elementMouseout({
                        label: i(e.data),
                        value: s(e.data),
                        point: e.data,
                        index: t,
                        id: u
                    })
                }).on("click", function(e, t) {
                    E.elementClick({
                        label: i(e.data),
                        value: s(e.data),
                        point: e.data,
                        index: t,
                        pos: d3.event,
                        id: u
                    });
                    d3.event.stopPropagation()
                }).on("dblclick", function(e, t) {
                    E.elementDblClick({
                        label: i(e.data),
                        value: s(e.data),
                        point: e.data,
                        index: t,
                        pos: d3.event,
                        id: u
                    });
                    d3.event.stopPropagation()
                });
                M.attr("fill", function(e, t) {
                    return a(e, t)
                });
				
				//------------------------THEME STYLING
				N.attr("fill", function(e, t) {
                    return themepiefont[themeid];
                })
				M.attr("stroke", function(e, t) {
                    return themebgacc[themeid];
                })
				//-------------------------		
	
				
                var P = D.append("path").each(function(e) {
                    this._current = e
                });
                M.select("path").transition().attr("d", A).attrTween("d", R);
                if (l) {
                    var H = d3.svg.arc().innerRadius(0);
                    if (c) {
                        H = A
                    }
                    if (h) {
                        H = d3.svg.arc().outerRadius(A.outerRadius())
                    }
                    _.enter().append("g").classed("nv-label", true).each(function(e, t) {
                        var n = d3.select(this);
                        n.attr("transform", function(e) {
                            if (g) {
                                e.outerRadius = x + 10;
                                e.innerRadius = x + 15;
                                var t = (e.startAngle + e.endAngle) / 2 * (180 / Math.PI);
                                if ((e.startAngle + e.endAngle) / 2 < Math.PI) {
                                    t -= 90
                                } else {
                                    t += 90
                                }
                                return "translate(" + H.centroid(e) + ") rotate(" + t + ")"
                            } else {
                                e.outerRadius = S + 10;
                                e.innerRadius = S + 15;
                                return "translate(" + H.centroid(e) + ")"
                            }
                        });
                        n.append("rect").attr("rx", 3).attr("ry", 3);
                        n.append("text").style("text-anchor", g ? (e.startAngle + e.endAngle) / 2 < Math.PI ? "start" : "end" : "middle")
                    });
                    var B = {};
                    var j = 14;
                    var F = 140;
                    var I = function(e) {
                        return Math.floor(e[0] / F) * F + "," + Math.floor(e[1] / j) * j
                    };
                    _.transition().attr("transform", function(e) {
                        if (g) {
                            e.outerRadius = x + 10;
                            e.innerRadius = x + 15;
                            var t = (e.startAngle + e.endAngle) / 2 * (180 / Math.PI);
                            if ((e.startAngle + e.endAngle) / 2 < Math.PI) {
                                t -= 90
                            } else {
                                t += 90
                            }
                            return "translate(" + H.centroid(e) + ") rotate(" + t + ")"
                        } else {
                            e.outerRadius = S + 10;
                            e.innerRadius = S + 15;
                            var n = H.centroid(e);
                            var r = I(n);
                            if (B[r]) {
                                n[1] -= j
                            }
                            B[I(n)] = true;
                            return "translate(" + n + ")"
                        }
                    });
                    _.select(".nv-label text").style("text-anchor", g ? (d.startAngle + d.endAngle) / 2 < Math.PI ? "start" : "end" : "middle").text(function(e, t) {
                        var n = (e.endAngle - e.startAngle) / (2 * Math.PI);
                        var r = {
                            key: i(e.data),
                            value: s(e.data),
                            percent: d3.format("%")(n)
                        };
                        return e.value && n > v ? r[p] : ""
                    })
                }
            });
            return S
        }
        var t = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            n = 250,
            r = 500,
            i = function(e) {
                return e.x
            },
            s = function(e) {
                return e.y
            },
            o = function(e) {
                return e.description
            },
            u = Math.floor(Math.random() * 1e4),
            a = e.utils.defaultColor(),
            f = d3.format(",.2f"),
            l = true,
            c = true,
            h = false,
            p = "key",
            v = .02,
            m = false,
            g = false,
            y = false,
            b = false,
            w = .5,
            E = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout");
        S.dispatch = E;
        S.options = e.utils.optionsFunc.bind(S);
        S.margin = function(e) {
            if (!arguments.length) return t;
            t.top = typeof e.top != "undefined" ? e.top : t.top;
            t.right = typeof e.right != "undefined" ? e.right : t.right;
            t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom;
            t.left = typeof e.left != "undefined" ? e.left : t.left;
            return S
        };
        S.width = function(e) {
            if (!arguments.length) return n;
            n = e;
            return S
        };
        S.height = function(e) {
            if (!arguments.length) return r;
            r = e;
            return S
        };
        S.values = function(t) {
            e.log("pie.values() is no longer supported.");
            return S
        };
        S.x = function(e) {
            if (!arguments.length) return i;
            i = e;
            return S
        };
        S.y = function(e) {
            if (!arguments.length) return s;
            s = d3.functor(e);
            return S
        };
        S.description = function(e) {
            if (!arguments.length) return o;
            o = e;
            return S
        };
        S.showLabels = function(e) {
            if (!arguments.length) return l;
            l = e;
            return S
        };
        S.labelSunbeamLayout = function(e) {
            if (!arguments.length) return g;
            g = e;
            return S
        };
        S.donutLabelsOutside = function(e) {
            if (!arguments.length) return h;
            h = e;
            return S
        };
        S.pieLabelsOutside = function(e) {
            if (!arguments.length) return c;
            c = e;
            return S
        };
        S.labelType = function(e) {
            if (!arguments.length) return p;
            p = e;
            p = p || "key";
            return S
        };
        S.donut = function(e) {
            if (!arguments.length) return m;
            m = e;
            return S
        };
        S.donutRatio = function(e) {
            if (!arguments.length) return w;
            w = e;
            return S
        };
        S.startAngle = function(e) {
            if (!arguments.length) return y;
            y = e;
            return S
        };
        S.endAngle = function(e) {
            if (!arguments.length) return b;
            b = e;
            return S
        };
        S.id = function(e) {
            if (!arguments.length) return u;
            u = e;
            return S
        };
        S.color = function(t) {
            if (!arguments.length) return a;
            a = e.utils.getColor(t);
            return S
        };
        S.valueFormat = function(e) {
            if (!arguments.length) return f;
            f = e;
            return S
        };
        S.labelThreshold = function(e) {
            if (!arguments.length) return v;
            v = e;
            return S
        };
        return S
    };
    e.models.pieChart = function() {
        "use strict";

        function v(e) {
            e.each(function(e) {
                var u = d3.select(this),
                    a = this;
                var f = (i || parseInt(u.style("width")) || 960) - r.left - r.right,
                    d = (s || parseInt(u.style("height")) || 400) - r.top - r.bottom;
                v.update = function() {
                    u.transition().call(v)
                };
                v.container = this;
                l.disabled = e.map(function(e) {
                    return !!e.disabled
                });
                if (!c) {
                    var m;
                    c = {};
                    for (m in l) {
                        if (l[m] instanceof Array) c[m] = l[m].slice(0);
                        else c[m] = l[m]
                    }
                }
                if (!e || !e.length) {
                    var g = u.selectAll(".nv-noData").data([h]);
                    g.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle");
                    g.attr("x", r.left + f / 2).attr("y", r.top + d / 2).text(function(e) {
                        return e
                    });
                    return v
                } else {
                    u.selectAll(".nv-noData").remove()
                }
                var y = u.selectAll("g.nv-wrap.nv-pieChart").data([e]);
                var b = y.enter().append("g").attr("class", "nvd3 nv-wrap nv-pieChart").append("g");
                var w = y.select("g");
                b.append("g").attr("class", "nv-pieWrap");
                b.append("g").attr("class", "nv-legendWrap");
                if (o) {
                    n.width(f).key(t.x());
                    y.select(".nv-legendWrap").datum(e).call(n);
                    if (r.top != n.height()) {
                        r.top = n.height();
                        d = (s || parseInt(u.style("height")) || 400) - r.top - r.bottom
                    }
                }
                y.select(".nv-pieWrap").attr("transform", "translate(0," + (.5 * parseInt(u.style("height")) - .5 * parseInt(u.style("width"))) + ")");
                t.width(parseInt(u.style("width"))).height(parseInt(u.style("height")));
                var E = w.select(".nv-pieWrap").datum([e]);
                d3.transition(E).call(t);
                n.dispatch.on("stateChange", function(e) {
                    l = e;
                    p.stateChange(l);
                    v.update()
                });
                t.dispatch.on("elementMouseout.tooltip", function(e) {
                    p.tooltipHide(e)
                });
                p.on("changeState", function(t) {
                    if (typeof t.disabled !== "undefined") {
                        e.forEach(function(e, n) {
                            e.disabled = t.disabled[n]
                        });
                        l.disabled = t.disabled
                    }
                    v.update()
                })
            });
            return v
        }
        var t = e.models.pie(),
            n = e.models.legend();
			
        var r = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            i = null,
            s = null,
            o = true,
            u = e.utils.defaultColor(),
            a = true,
            f = function(e, t, n, r) {
                return "<h3"+
				
				//------------------------THEME STYLING
				" style='border-bottom:1px solid "+themetooltipborder[themeid]
				//-------------------------
				
				+";'><b>" + e + "</b></h3>" + "<p>" + t + "</p>"
            },
            l = {},
            c = null,
            h = "No Data Available.",
            p = d3.dispatch("tooltipShow", "tooltipHide", "stateChange", "changeState");
        var d = function(n, r) {
            var i = t.description()(n.point) || t.x()(n.point);
            var s = n.pos[0] + (r && r.offsetLeft || 0),
                o = n.pos[1] + (r && r.offsetTop || 0),
                u = t.valueFormat()(t.y()(n.point)),
                a = f(i, u, n, v);
            e.tooltip.show([s, o], a, n.value < 0 ? "n" : "w", null, r)
        };
        t.dispatch.on("elementMouseover.tooltip", function(e) {
            e.pos = [e.pos[0], e.pos[1]];
            p.tooltipShow(e)
        });
        p.on("tooltipShow", function(e) {
            if (a) d(e)
        });
        p.on("tooltipHide", function() {
            if (a) e.tooltip.cleanup()
        });
        v.legend = n;
        v.dispatch = p;
        v.pie = t;
		
        d3.rebind(v, t, "valueFormat", "values", "x", "y", "description", "id", "showLabels", "donutLabelsOutside", "pieLabelsOutside", "labelType", "donut", "donutRatio", "labelThreshold");
        v.options = e.utils.optionsFunc.bind(v);
        v.margin = function(e) {
            if (!arguments.length) return r;
            r.top = typeof e.top != "undefined" ? e.top : r.top;
            r.right = typeof e.right != "undefined" ? e.right : r.right;
            r.bottom = typeof e.bottom != "undefined" ? e.bottom : r.bottom;
            r.left = typeof e.left != "undefined" ? e.left : r.left;
            return v
        };
        v.width = function(e) {
            if (!arguments.length) return i;
            i = e;
            return v
        };
        v.height = function(e) {
            if (!arguments.length) return s;
            s = e;
            return v
        };
        v.color = function(r) {
            if (!arguments.length) return u;
            u = e.utils.getColor(r);
            n.color(u);
            t.color(u);
            return v
        };
        v.showLegend = function(e) {
            if (!arguments.length) return o;
            o = e;
            return v
        };
        v.tooltips = function(e) {
            if (!arguments.length) return a;
            a = e;
            return v
        };
        v.tooltipContent = function(e) {
            if (!arguments.length) return f;
            f = e;
            return v
        };
        v.state = function(e) {
            if (!arguments.length) return l;
            l = e;
            return v
        };
        v.defaultState = function(e) {
            if (!arguments.length) return c;
            c = e;
            return v
        };
        v.noData = function(e) {
            if (!arguments.length) return h;
            h = e;
            return v
        };
        return v
    }
})()